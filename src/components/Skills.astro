<!-- ===== Skills: Carrusel 3D refinado ===== -->
<section id="skills" class="relative py-30 overflow-hidden">
  <!-- fondo suave -->
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(255,192,203,0.08),transparent_70%)] opacity-30 pointer-events-none"></div>

  <div class="relative max-w-7xl mx-auto px-6 text-center">
    <h2 class="text-5xl font-bold mb-16 text-gray-100 tracking-tight">Skills</h2>

    <div id="carousel-wrap" class="mx-auto" style="max-width:1400px;">
      <div id="carousel3d" class="carousel-3d">
        
        <!-- FRONT-END -->
        <div class="carousel-card border-t-2 border-pink-400">
          <h3 class="text-xl font-semibold text-pink-400 mb-4 uppercase tracking-wide">Front-End</h3>
          <div class="skills-grid">
            <div class="skill-item"><img src="https://cdn.simpleicons.org/html5/E1E1E1" alt="HTML5" class="skill-icon"><span class="skill-name">HTML5</span></div>
            <div class="skill-item"><img src="/css.png" alt="CSS3" class="skill-icon"><span class="skill-name">CSS3</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/sass/E1E1E1" alt="Sass" class="skill-icon"><span class="skill-name">Sass</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/javascript/E1E1E1" alt="JavaScript" class="skill-icon"><span class="skill-name">JavaScript</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/typescript/E1E1E1" alt="TypeScript" class="skill-icon"><span class="skill-name">TypeScript</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/react/E1E1E1" alt="React" class="skill-icon"><span class="skill-name">React</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/angular/E1E1E1" alt="Angular" class="skill-icon"><span class="skill-name">Angular</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/tailwindcss/E1E1E1" alt="Tailwind CSS" class="skill-icon"><span class="skill-name">Tailwind CSS</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/bootstrap/E1E1E1" alt="Bootstrap" class="skill-icon"><span class="skill-name">Bootstrap</span></div>
          </div>
        </div>

        <!-- BACK-END -->
        <div class="carousel-card border-t-2 border-green-400">
          <h3 class="text-xl font-semibold text-green-400 mb-4 uppercase tracking-wide">Back-End</h3>
          <div class="skills-grid">
            <div class="skill-item"><img src="https://cdn.simpleicons.org/php/E1E1E1" alt="PHP" class="skill-icon"><span class="skill-name">PHP</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/laravel/E1E1E1" alt="Laravel" class="skill-icon"><span class="skill-name">Laravel</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/mysql/E1E1E1" alt="MySQL" class="skill-icon"><span class="skill-name">MySQL</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/nodedotjs/E1E1E1" alt="Node.js" class="skill-icon"><span class="skill-name">Node.js</span></div>
            <div class="skill-item"><svg class="skill-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M4 21v-4a2 2 0 012-2h12a2 2 0 012 2v4M4 3v4a2 2 0 002 2h12a2 2 0 002-2V3"></path></svg><span class="skill-name">REST APIs</span></div>
          </div>
        </div>

        <!-- UI/UX -->
        <div class="carousel-card border-t-2 border-yellow-400">
          <h3 class="text-xl font-semibold text-yellow-400 mb-4 uppercase tracking-wide">UI / UX</h3>
          <div class="skills-grid">
            <div class="skill-item"><img src="https://cdn.simpleicons.org/figma/E1E1E1" alt="Figma" class="skill-icon"><span class="skill-name">Figma</span></div>
            <div class="skill-item"><svg class="skill-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.07 12.35l.22-1.86a2.5 2.5 0 10-4.58 1.01l-1.86.22a8.5 8.5 0 118.23-8.23l.22 1.86a2.5 2.5 0 10-1.01 4.58l-1.86-.22a8.5 8.5 0 01-8.23 8.23z"></path></svg><span class="skill-name">Prototipado</span></div>
            <div class="skill-item"><svg class="skill-icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 7h-6v13h-2v-6h-2v6H9V9H3V7h18v2z"></path></svg><span class="skill-name">Accesibilidad</span></div>
            <div class="skill-item"><svg class="skill-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg><span class="skill-name">Diseño Responsivo</span></div>
            <div class="skill-item"><svg class="skill-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 4h3a2 2 0 012 2v12a2 2 0 01-2 2h-3m-6 0H6a2 2 0 01-2-2V6a2 2 0 012-2h3m0 0h6v16h-6V4z"></path></svg><span class="skill-name">Wireframing</span></div>
          </div>
        </div>

        <!-- HERRAMIENTAS -->
        <div class="carousel-card border-t-2 border-blue-400">
          <h3 class="text-xl font-semibold text-blue-400 mb-4 uppercase tracking-wide">Herramientas</h3>
          <div class="skills-grid">
            <div class="skill-item"><img src="https://cdn.simpleicons.org/git/E1E1E1" alt="Git" class="skill-icon"><span class="skill-name">Git</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/github/E1E1E1" alt="GitHub" class="skill-icon"><span class="skill-name">GitHub</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/docker/E1E1E1" alt="Docker" class="skill-icon"><span class="skill-name">Docker</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/jenkins/E1E1E1" alt="Jenkins" class="skill-icon"><span class="skill-name">Jenkins</span></div>
            <div class="skill-item"><img src="/sonarqube.png" alt="SonarQube" class="skill-icon"><span class="skill-name">SonarQube</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/selenium/E1E1E1" alt="Selenium" class="skill-icon"><span class="skill-name">Selenium</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/postman/E1E1E1" alt="Postman" class="skill-icon"><span class="skill-name">Postman</span></div>
          </div>
        </div>

        <!-- OTROS -->
        <div class="carousel-card border-t-2 border-rose-400">
          <h3 class="text-xl font-semibold text-rose-400 mb-4 uppercase tracking-wide">Otros</h3>
          <div class="skills-grid">
            <div class="skill-item"><img src="/java.png" alt="Java" class="skill-icon"><span class="skill-name">Java</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/apachemaven/E1E1E1" alt="Maven" class="skill-icon"><span class="skill-name">Maven</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/json/E1E1E1" alt="JSON" class="skill-icon"><span class="skill-name">JSON / XML</span></div>
            <div class="skill-item"><img src="https://cdn.simpleicons.org/socketdotio/E1E1E1" alt="WebSockets" class="skill-icon"><span class="skill-name">WebSockets</span></div>
            <div class="skill-item"><svg class="skill-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.636 5.636a9 9 0 0112.728 0m-2.828 9.9a5 5 0 01-7.072 0"></path></svg><span class="skill-name">Reverb</span></div>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<style>
  /* contenedor general */
  .carousel-3d {
    --height: 520px;
    position: relative;
    width: 100%;
    height: var(--height);
    margin: 0 auto;
    perspective: 2200px;
    transform-style: preserve-3d;
    overflow: visible;
    pointer-events: auto;
  }

  /* cards */
  .carousel-card {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 360px;
    height: 440px;
    transform-style: preserve-3d;
    transform-origin: center center;
    border-radius: 1.25rem;
    padding: 1.75rem;
    background: rgba(255,255,255,0.07);
    backdrop-filter: blur(10px) saturate(150%);
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 12px 25px rgba(0,0,0,0.5);
    transition: box-shadow .25s ease, transform .25s ease;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    text-align: left;
    backface-visibility: hidden;
    will-change: transform;
  }

  .carousel-card:hover {
    transform: translate(-50%, -50%) scale(1.04);
    box-shadow: 0 16px 40px rgba(236,72,153,0.25);
    background: rgba(255,255,255,0.12);
  }

  /* responsive */
  @media (max-width: 900px) {
    .carousel-card { width: 280px; height: 360px; }
    .carousel-3d { --height: 420px; perspective: 1600px; }
  }

  @media (max-width: 520px) {
    .carousel-card { width: 240px; height: 320px; }
    .carousel-3d { --height: 380px; perspective: 1300px; }
  }

  /* Grid para las skills */
  .skills-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 1.5rem; /* más espacio */
    padding-top: 1rem;
    width: 100%;
  }

  .skill-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 0.75rem; /* espacio entre icono y nombre */
  }

  .skill-icon {
    width: 48px; /* iconos más grandes */
    height: 48px;
    opacity: 0.9;
    transition: all .2s ease-in-out;
  }
  
  .skill-item:hover .skill-icon {
      opacity: 1;
      transform: scale(1.1);
  }

  .skill-name {
    font-size: 0.8rem; /* más pequeño */
    color: #a0aec0; /* un poco más claro */
    font-weight: 500;
  }
</style>

<script>
(function() {
  const carousel = document.getElementById("carousel3d");
  if (!carousel) return;
  const cards = Array.from(carousel.children);
  if (cards.length === 0) return;

  const num = cards.length;
  let baseAngle = 0;
  let speed = 0.0016; 
  let radius = Math.min(window.innerWidth, 1400) * 0.32;
  
  const recalcRadius = () => {
    radius = Math.min(window.innerWidth, 1400) * (window.innerWidth < 900 ? 0.28 : 0.32);
  };
  window.addEventListener("resize", recalcRadius);

  function updatePositions() {
    const step = (Math.PI * 2) / num;
    for (let i = 0; i < num; i++) {
      const angle = baseAngle + i * step;
      const x = Math.sin(angle) * radius;
      const z = Math.cos(angle) * radius;
      const scale = 0.9 + ((z / radius) * 0.15);
      const deg = (angle * 180) / Math.PI;
      const zIndex = Math.round(z + radius);

      cards[i].style.transform = `translate(-50%, -50%) translateX(${x}px) translateZ(${z}px) rotateY(${deg}deg) scale(${scale})`;
      cards[i].style.zIndex = 1000 + zIndex;
      cards[i].style.opacity = 0.6 + ((z / radius) * 0.4);
    }
  }

  let rafId = null;
  let running = true;

  function animate() {
    if (running) baseAngle -= speed;
    updatePositions();
    rafId = requestAnimationFrame(animate);
  }

  recalcRadius();
  animate();

  let isHeld = false;
  const pause = () => running = false;
  const resume = () => { if (!isHeld) running = true; };

  carousel.addEventListener("pointerdown", e => { isHeld = true; pause(); e.preventDefault(); }, { passive: false });
  window.addEventListener("pointerup", () => { if (isHeld) { isHeld = false; resume(); } });
  carousel.addEventListener("pointerenter", () => pause());
  carousel.addEventListener("pointerleave", () => resume());

  carousel.tabIndex = 0;
  carousel.addEventListener("keydown", (e) => {
    if (e.code === "Space") { running = !running; e.preventDefault(); }
  });

  window.addEventListener("beforeunload", () => cancelAnimationFrame(rafId));
})();
</script>